<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stocks Analysis Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="theme-light">
    <script>
      window.STOCK_PROXY_URL = "https://ai-stock-analysis-6nk5.onrender.com";
    </script>
    <header>
      <button id="open-settings" class="settings-btn" type="button">
        Settings ⚙️
      </button>
      <h1>Stocks Analysis</h1>
      <p class="tagline">Global quote snapshots powered by Yahoo Finance data</p>
      <form id="search-form">
        <input
          type="text"
          id="search-input"
          placeholder="NO STOCK INFO"
          autocomplete="off"
        />
        <button type="submit">Search</button>
      </form>
      <p class="hint">
        Tip: open this folder with VS Code and use the Live Server extension to
        avoid CORS issues.
      </p>
      <p class="permission-note">
        Live quotes may be outdated because of permission/network restrictions. Cached values are shown when live data is blocked.
        Use the hosted proxy at <a href="https://ai-stock-analysis-6nk5.onrender.com" target="_blank" rel="noopener">ai-stock-analysis-6nk5.onrender.com</a> (or run <code>node server.js</code> locally) when direct finance APIs are blocked.
      </p>
    </header>

    <div id="refresh-indicator" class="refresh-indicator" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <main>
      <section class="feature-card best-card">
        <h2>Top Pick · #1</h2>
        <div class="feature-body" id="feature-body">
          <p>Loading featured insights…</p>
        </div>
      </section>

      <section class="feature-card worst-card">
        <h2>Biggest Risk · #1</h2>
        <div class="feature-body" id="worst-body">
          <p>Scanning laggards…</p>
        </div>
      </section>

      <section class="leaders">
        <div>
          <h2>Top 10 Momentum Leaders</h2>
          <div id="top-ten" class="leaders-list">
            <p class="placeholder">Gathering leaders…</p>
          </div>
        </div>
        <div>
          <h2>Top 10 Underperformers</h2>
          <div id="bottom-ten" class="leaders-list">
            <p class="placeholder">Gathering laggards…</p>
          </div>
        </div>
      </section>

      <section class="criteria">
        <h2>How Picks Are Ranked</h2>
        <ul>
          <li>Universe is limited to companies with market cap above <strong>$5B</strong>.</li>
          <li>Daily percentage change determines the #1 best, #1 worst, and Top 10 lists.</li>
          <li>Featured pick = top gainer, biggest risk = top decliner among large caps.</li>
        </ul>
      </section>

      <section class="results">
        <h2>Quote Lookup</h2>
        <div id="results-container" class="results-container">
          <p class="placeholder">Search a ticker to see detailed quote data.</p>
        </div>
      </section>

      <section class="watchlist">
        <h2>Trending Watchlist</h2>
        <div id="watchlist-container" class="watchlist-container">
          <p class="placeholder">Loading watchlist…</p>
        </div>
      </section>
    </main>

    <div id="settings-backdrop" class="settings-backdrop"></div>
    <section id="settings-panel" class="settings-panel" aria-hidden="true">
      <h2>Dashboard Settings</h2>
      <p>Adjust appearance preferences for your market overview.</p>
      <form id="settings-form">
        <fieldset>
          <legend>Theme</legend>
          <div class="theme-options">
            <label>
              <input type="radio" name="theme" value="light" />
              Light (default)
            </label>
            <label>
              <input type="radio" name="theme" value="dark" />
              Dark
            </label>
            <label>
              <input type="radio" name="theme" value="peach" />
              Peach
            </label>
            <label>
              <input type="radio" name="theme" value="tan" />
              Tan
            </label>
            <label>
              <input type="radio" name="theme" value="seasonal" checked />
              Seasonal (auto detects current season)
            </label>
          </div>
        </fieldset>
        <fieldset>
          <legend>Refresh Frequency</legend>
          <select id="refresh-interval">
            <option value="15">Every 15 minutes</option>
            <option value="30">Every 30 minutes</option>
            <option value="60" selected>Every 60 minutes</option>
          </select>
        </fieldset>
        <fieldset>
          <legend>Ranking Method</legend>
          <div class="theme-options">
            <label>
              <input type="radio" name="ranking-mode" value="daily" checked />
              Daily change (today's movers)
            </label>
            <label>
              <input type="radio" name="ranking-mode" value="momentum" />
              Momentum forecast (AI heuristic)
            </label>
          </div>
        </fieldset>
        <fieldset class="display-options">
          <legend>Display Options</legend>
          <label>
            <input type="checkbox" id="toggle-watchlist" checked />
            Show watchlist panel
          </label>
          <label>
            <input type="checkbox" id="toggle-highlight" checked />
            Highlight AI outlook tags
          </label>
          <label>
            <input type="checkbox" id="toggle-new-tab" checked />
            Open finance links in new tab
          </label>
        </fieldset>
      </form>
      <p class="season-note">
        Current seasonal palette: <strong id="season-label">—</strong>
      </p>
      <div class="settings-actions">
        <button type="button" id="close-settings">Close</button>
      </div>
    </section>

    <template id="quote-card-template">
      <article class="quote-card">
        <div class="quote-top">
          <h3 class="symbol"></h3>
          <span class="name"></span>
        </div>
        <div class="quote-middle">
          <span class="price"></span>
          <span class="change"></span>
        </div>
        <dl class="metrics">
          <div>
            <dt>Day Range</dt>
            <dd class="day-range"></dd>
          </div>
          <div>
            <dt>52W Range</dt>
            <dd class="year-range"></dd>
          </div>
          <div>
            <dt>Volume</dt>
            <dd class="volume"></dd>
          </div>
          <div>
            <dt>Market Cap</dt>
            <dd class="market-cap"></dd>
          </div>
        </dl>
        <button class="quick-google" type="button">View on Google Finance</button>
      </article>
    </template>

    <script src="app.js" type="module"></script>
  </body>
</html>
