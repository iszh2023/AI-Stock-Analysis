"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_use-client-value_use-client-value_ts-packages_create-branch-button_CreateBranchButton_tsx"],{20263:(e,t,r)=>{r.d(t,{BC:()=>s,JU:()=>d,Pk:()=>i});var a=r(74848),n=r(87448),o=r(99418),l=r(96540);let i=u(n.az),s=u(n.EY),c=(0,l.forwardRef)((e,t)=>(0,a.jsx)("div",{ref:t,...e}));c.displayName="Div";let d=u(c);function u(e){let t=(0,l.forwardRef)((t,r)=>{let{sanitizedHTML:n,props:l}=function(e){let{html:t,domPurifyConfig:r,...a}=e,n={...r,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:o.default.sanitize(t,n),props:a}}(t);return(0,a.jsx)(e,{ref:r,...l,dangerouslySetInnerHTML:{__html:n}})});return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{d.displayName||(d.displayName="UnsafeHTMLDiv")}catch{}},40260:(e,t,r)=>{r.d(t,{D:()=>a});function a(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let r=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(r),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let r=document.createRange();r.selectNodeContents(e),t.addRange(r),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(r),t.removeChild(r),Promise.resolve()}},51416:(e,t,r)=>{r.d(t,{F:()=>T});var a=r(74848),n=r(96540),o=r(21373),l=r(86877),i=r(15220),s=r(66990),c=r(96379),d=r(65025),u=r(98755),m=r(99511);let p={NewBranchNameInputGroup:"NewBranchName-module__NewBranchNameInputGroup--hhSjt",TextInput:"NewBranchName-module__TextInput--lqzqa",copyButtonContainer:"NewBranchName-module__copyButtonContainer--YlH4s",CopyToClipboardButton:"NewBranchName-module__CopyToClipboardButton--XbiHw"};var h=r(34164);let x=(0,n.forwardRef)(function({newBranchName:e,setNewBranchName:t},r){return(0,a.jsxs)(l.A,{children:[(0,a.jsx)(l.A.Label,{children:"New branch name"}),(0,a.jsxs)("div",{className:p.NewBranchNameInputGroup,children:[(0,a.jsx)(m.A,{block:!0,className:(0,h.$)("color-bg-subtle",p.TextInput),value:e,onChange:e=>t(e.target.value),ref:r}),(0,a.jsx)("div",{className:(0,h.$)("color-bg-subtle",p.copyButtonContainer),children:(0,a.jsx)(u.T,{tooltipProps:{direction:"nw"},textToCopy:e,ariaLabel:"Copy to clipboard",className:(0,h.$)("pt-1",p.CopyToClipboardButton)})})]})]})});try{x.displayName||(x.displayName="NewBranchName")}catch{}var f=r(31604),N=r(5524),y=r(38621);let b={ForkPickerButtonContent:"ForkPicker-module__ForkPickerButtonContent--twfKB",repoIconContainer:"ForkPicker-module__repoIconContainer--OHc0s",repoNameContainer:"ForkPicker-module__repoNameContainer--QvaEf",repoNameText:"ForkPicker-module__repoNameText--n_Uv1"};function v(e){return`${e.ownerLogin}/${e.name}`}function C({isForkSourceOpen:e,setForkSourceOpen:t,repoSource:r,setRepoSource:l,repository:i,repositoryParent:s,setDefaultBranch:c,setBranchSource:d}){return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)("span",{className:"note text-small mt-0",children:"Choose from this fork or its upstream repository."}),(0,a.jsx)(f.T,{open:e,overlayProps:{role:"dialog",width:"medium"},onOpen:()=>t(!0),onClose:()=>t(!1),renderAnchor:e=>(0,a.jsx)(o.Q,{...e,trailingVisual:y.TriangleDownIcon,"aria-label":v(r),"data-testid":"anchor-button",children:(0,a.jsxs)("div",{className:b.ForkPickerButtonContent,children:[(0,a.jsx)("div",{className:b.repoIconContainer,children:(0,a.jsx)(y.RepoIcon,{size:"small"})}),(0,a.jsx)("div",{className:b.repoNameContainer,children:(0,a.jsxs)("span",{className:b.repoNameText,children:["\xa0",`${v(r)}`]})})]})}),focusZoneSettings:{disabled:!0},children:(0,a.jsx)("div",{"data-testid":"overlay-content",id:"selectPanel",children:(0,a.jsxs)(N.l,{selectionVariant:"single",children:[(0,a.jsx)(N.l.Item,{selected:r.id===s.id,onSelect:()=>{l(s),c(s.defaultBranch),d(s.defaultBranch),t(!1)},children:`${s.ownerLogin}/${s.name}`}),(0,a.jsx)(N.l.Item,{selected:r.id===i.id,onSelect:()=>{l(i),c(i.defaultBranch),d(i.defaultBranch),t(!1)},children:`${i.ownerLogin}/${i.name}`})]})})})]})}try{C.displayName||(C.displayName="ForkPicker")}catch{}var _=r(40235),j=r(88934);function g({channel:e="",onUpdate:t}){let[,r]=(0,j.ok)(),a=(0,n.useCallback)(e=>{t(e),r(t=>(t.set("branch_event",encodeURIComponent(e.reason)),t))},[t,r]);return(0,_.x)(e,a),null}try{g.displayName||(g.displayName="LiveBranches")}catch{}function T({branchListCacheKey:e,repository:t,repositoryParent:r,createUrl:u,helpUrl:m,liveReload:p}){let[h,f]=(0,n.useState)(!1),[N,y]=(0,n.useState)(t.defaultBranch),[b,v]=(0,n.useState)(t.defaultBranch),[_,j]=(0,n.useState)(""),[T,w]=(0,n.useState)(t),[k,B]=(0,n.useState)(!1),[S,F]=(0,n.useState)(void 0),[R,I]=(0,n.useState)(void 0),[P,L]=(0,n.useState)(!1),[E,A]=(0,n.useState)(!1),[$,U]=(0,n.useState)(void 0),H=(0,n.useRef)(null),M=(0,n.useRef)(null);function O(){F(void 0),I(void 0),j(""),L(!1)}async function D(){if(!E){A(!0);let e=new FormData;e.append("name",_),e.append("branch",b),r&&e.append("repo",T.id.toString()),e.append("send_response_as_json","true");let t=await (0,c.DI)(u,{method:"post",body:e,headers:{Accept:"application/json"}}),a=await t.json();if(t.ok)O(),f(!1),p&&a.channel?U(a.channel):window.location.reload();else{let e=a.error;e?.includes("Repository rule violations found")?(I(void 0),F(e.replace("Repository rule violations found","").trim().split(`

`).slice(0,3))):e&&(F(void 0),I(e.trim()))}A(!1)}}return(0,n.useEffect)(()=>{h&&requestAnimationFrame(()=>M.current?.focus())},[h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Q,{ref:H,variant:"primary",className:"ml-3",onClick:()=>{O(),f(!0)},children:"New branch"}),h&&(0,a.jsx)(i.l,{title:"Create a branch",width:"large",onClose:()=>{f(!1),O()},returnFocusRef:H,footerButtons:P?[]:[{content:"Cancel",buttonType:"normal",onClick:()=>{f(!1),O()}},{content:"Create new branch",buttonType:"primary",onClick:D}],children:(0,a.jsxs)(a.Fragment,{children:[(S||R)&&(0,a.jsx)(d.r,{prefix:"Unable to create branch:",errorMessageUsingPrefix:S?"Please address the rule violations and try again.":void 0,errorMessageNotUsingPrefix:R,ruleErrors:S,helpUrl:m}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),D()},children:(0,a.jsx)(x,{newBranchName:_,setNewBranchName:j,ref:M})}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)(l.A,{children:[(0,a.jsx)(l.A.Label,{className:"mb-0",children:"Source"}),r&&(0,a.jsx)(C,{isForkSourceOpen:k,setForkSourceOpen:B,repoSource:T,setRepoSource:w,repository:t,repositoryParent:r,setDefaultBranch:y,setBranchSource:v}),(0,a.jsx)(s.PI,{currentCommitish:b,defaultBranch:N,owner:T.ownerLogin,repo:T.name,canCreate:!1,cacheKey:e,selectedRefType:"branch",onSelectItem:e=>v(e),closeOnSelect:!0,types:["branch"],hideShowAll:!0})]})})]})}),$?(0,a.jsx)(g,{channel:$,onUpdate:()=>U(void 0)}):null]})}try{T.displayName||(T.displayName="CreateBranchButton")}catch{}},54571:(e,t,r)=>{r.d(t,{I:()=>l});var a=r(96540),n=r(88431),o=r(76629);function l(e,t,r=[]){let i=(0,a.useCallback)(e,r),s=(0,o.BP)(),c=(0,a.useRef)(s===o.O8.ClientRender),[d,u]=(0,a.useState)(()=>s===o.O8.ClientRender?i():t),m=(0,a.useCallback)(()=>{u(i)},[i]);return(0,n.N)(()=>{c.current||u(i),c.current=!1},[i,...r]),[d,m]}},65025:(e,t,r)=>{r.d(t,{r:()=>u});var a=r(74848),n=r(38621),o=r(72511),l=r(57352),i=r(10095),s=r(20263);let c={Flash:"FlashError-module__Flash--fKR6V",SafeHTMLText:"FlashError-module__SafeHTMLText--J8lL9",Link:"FlashError-module__Link--doNrG",ruleViolationsTitle:"FlashError-module__ruleViolationsTitle--rHHNU",ruleViolationRow:"FlashError-module__ruleViolationRow--ekTTM",Octicon:"FlashError-module__Octicon--U4ZWa",ruleViolationText:"FlashError-module__ruleViolationText--Oe758"};var d=r(34164);function u({prefix:e,errorMessageUsingPrefix:t,errorMessageNotUsingPrefix:r,hideRuleErrorsTitle:u,ruleErrors:m,helpUrl:p,flashRef:h}){let x=(m?.length||0)>0;return t||r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{id:"flash",variant:"danger",className:(0,d.$)("d-flex flex-items-center flex-justify-between",c.Flash),tabIndex:-1,ref:h,children:t?(0,a.jsxs)("div",{children:[e," ",(0,a.jsx)(s.BC,{className:c.SafeHTMLText,html:t}),x&&p&&(0,a.jsx)(l.A,{href:`${p}/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets`,className:c.Link,children:"Learn more about rulesets."})]}):r&&(0,a.jsx)("div",{children:r})}),x&&(0,a.jsxs)("div",{className:c.Flash,children:[!u&&(0,a.jsx)("div",{className:c.ruleViolationsTitle,children:"Repository rule violations found:"}),m?.map(e=>(0,a.jsxs)("div",{className:c.ruleViolationRow,children:[(0,a.jsx)(i.A,{icon:n.XCircleFillIcon,size:16,className:c.Octicon}),(0,a.jsx)("div",{className:c.ruleViolationText,children:e})]},e))]})]}):null}try{u.displayName||(u.displayName="FlashError")}catch{}},98755:(e,t,r)=>{r.d(t,{T:()=>p});var a=r(74848),n=r(70263),o=r(38621),l=r(26108),i=r(96540),s=r(34164),c=r(87448),d=r(4559),u=r(40260);let m={tooltip:"CopyToClipboardButton-module__tooltip--HDUYz"};function p({icon:e=o.CopyIcon,size:t="medium",onCopy:r,textToCopy:p,tooltipProps:h,variant:x="invisible",ariaLabel:f,className:N,disabled:y,...b}){let[v,C]=i.useState(!1),_=(0,n.A)(),j=f??`Copy "${p}" to clipboard`,g=v?"Copied!":j,T={size:t,variant:x,onClick:()=>{C(!0),(0,d.i)("Copied!"),(0,u.D)(p),r?.(),setTimeout(()=>_()&&C(!1),2e3)},icon:v?o.CheckIcon:e,className:(0,s.$)(v?"color-fg-success":void 0,N),...b},w=(0,i.useId)();return y?(0,a.jsx)(l.K,{...T,"aria-label":j,disabled:!0}):(0,a.jsx)(c.m_,{text:g,"aria-label":j,type:"label",id:w,"aria-hidden":!0,...h,className:(0,s.$)(m.tooltip,h?.className),children:(0,a.jsx)(l.K,{...T,"aria-labelledby":w})})}try{p.displayName||(p.displayName="CopyToClipboardButton")}catch{}}}]);
//# sourceMappingURL=packages_use-client-value_use-client-value_ts-packages_create-branch-button_CreateBranchButton_tsx-1c97f4048cd8.js.map